<themes:OPWindow x:Class="OneProject.Desktop.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:local="clr-namespace:OneProject.Desktop"
        xmlns:themes="http://github.com/maple512/oneproject.desktop/themes" mc:Ignorable="d" MinHeight="700" MinWidth="1000"
        xmlns:models="clr-namespace:OneProject.Desktop.ViewModels" d:DataContext="{d:DesignInstance models:MainWindowModel}">

    <themes:OPWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/OneProject.Desktop.Theme;component/Themes/ThemeBase.xaml" />
                <ResourceDictionary Source="pack://application:,,,/OneProject.Desktop.Theme;component/Themes/OPTextBlock.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <themes:DoubleGridLengthConverter x:Key="DoubleGridLengthConverter" />
            <themes:NotNullToVisibleConverter x:Key="NotNullToVisibleConverter" />
        </ResourceDictionary>

    </themes:OPWindow.Resources>

    <themes:OPWindow.TaskbarItemInfo>
        <TaskbarItemInfo ProgressState="Normal">
            <TaskbarItemInfo.Overlay>
                <BitmapImage UriSource="/assets/logo_128.ico" />
            </TaskbarItemInfo.Overlay>
        </TaskbarItemInfo>
    </themes:OPWindow.TaskbarItemInfo>

    <!--<themes:OPWindow.Title>
    </themes:OPWindow.Title>-->

    <themes:OPWindow.Content>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition
                        Width="{Binding Source={StaticResource Number.Menu.Width},Converter={StaticResource DoubleGridLengthConverter}}" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <ListBox Grid.Column="0" BorderThickness="0" ItemsSource="{Binding Menus}" SelectedIndex="{Binding SelectedIndex}"
                    SelectedItem="{Binding SelectedItem, UpdateSourceTrigger=PropertyChanged}"
                    Background="{DynamicResource Brush.Window.Background}">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListBoxItem">
                                    <Border x:Name="B_MenuItem" Height="{StaticResource Number.Menu.Height}" Margin="2"
                                            Padding="10"
                                            CornerRadius="{StaticResource Number.CornerRadius}">
                                        <Grid ClipToBounds="False">
                                            <Grid>
                                                <Border x:Name="B_MouseOver" Background="{DynamicResource Brush.Background}" Opacity="0" />
                                                <Border x:Name="B_Selected" Opacity="0" />
                                            </Grid>
                                            <Grid>
                                                <ContentPresenter />
                                            </Grid>
                                        </Grid>

                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter TargetName="B_MenuItem" Property="Background" Value="{DynamicResource Brush.Background}" />
                                            <Setter TargetName="B_MenuItem" Property="TextElement.Foreground"
                                                    Value="{DynamicResource Brush.Foreground}" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemTemplate>
                    <DataTemplate DataType="{x:Type models:MenuItemModel}">
                        <themes:OPStackPanel HorizontalAlignment="Left" VerticalAlignment="Center" Orientation="Horizontal">
                            <themes:OPIcon Kind="{Binding Icon}"
                                    Visibility="{Binding Icon,Converter={StaticResource NotNullToVisibleConverter}}" />
                            <TextBlock Text="{Binding Title}" Style="{StaticResource H6}" />
                        </themes:OPStackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <themes:OPCard Grid.Column="1">
                <ContentControl Content="{Binding SelectedItem.Content, UpdateSourceTrigger=PropertyChanged,FallbackValue={x:Null}}"
                        HorizontalContentAlignment="Left" VerticalContentAlignment="Top" />
            </themes:OPCard>
        </Grid>
    </themes:OPWindow.Content>

</themes:OPWindow>
